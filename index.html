<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<title>Mortgage</title>
</head>
<body>

<script>
    function addBank(){
        var request = new XMLHttpRequest()
        var name = document.getElementById('name').value
        var interest_rate = document.getElementById('interest_rate').value
        var maximum_loan = document.getElementById('maximum_loan').value
        var minimum_down_payment = document.getElementById('minimum_down_payment').value
        var loan_term = document.getElementById('loan_term').value
        var body = JSON.stringify({
            'name' : name,
            'interest_rate' : interest_rate,
            'maximum_loan' : maximum_loan,
            'minimum_down_payment' : minimum_down_payment,
            'loan_term' : loan_term
        })
        console.log(body)
        request.open("POST", '/api/add_bank', true)
        request.setRequestHeader("Content-type", "application/json")
        request.send(body)
    }
    function displayData(data){
            //console.log(data.banks)
            var table = document.createElement('table')
            for (var i = 0; i < data.banks.length; ++i){
            var bank = data.banks[i]
            console.log(bank)
            var orderArrayHeader = ["name","interest_rate","maximum_loan","minimum_down_payment", "loan_term", "id"];               
            if (i===0){
                  var thead = document.createElement('thead')
                  table.appendChild(thead)
                  for (var j = 0; j < orderArrayHeader.length; ++j){
                  thead.appendChild(document.createElement('th')).
                  appendChild(document.createTextNode(orderArrayHeader[j]))
            }
         }
    
                console.log(table)
                table.style.border = 1
                table.id = "banksTable"
                document.getElementById('bankData').appendChild(table)
            }
</script>

<center><h1>Adding a Bank</h1></center>
<form action="javascript:addBank()">
    <ul>
        <li>
            <label for="name">Name:</label>
            <input type = "text" id = "name" name="name">
        </li>
        <li>
            <label for="interest_rate">Interest Rate(%):</label>
            <input type="number" step="0.01" name="interest_rate" id="interest_rate">
        </li>
        <li>
            <label for="maximum_loan">Maximum Loan:</label>
            <input type="number" name="maximum_loan" id="maximum_loan">
        </li>
        <li>
            <label for="minimum_down_payment">Minimum Down Payment(%)</label>
            <input type="number" name="minimum_down_payment" id="minimum_down_payment" step="0.01">
        </li>
        <li>
            <label for="loan_term">Loan Term:</label>
            <input type="number" name="loan_term" id="loan_term">
        </li>
        <li class="button">
            <button type="submit">Add a Bank!</button>
        </li>
    </ul>
</form>

</body>
</html>